<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Admission Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f0f2f5;
    }
    .container {
      max-width: 600px;
      margin-top: 60px;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<div class="container">
  <h3 class="mb-4">Student Admission Form</h3>
  <form id="form">
    <div class="mb-3">
      <label for="name" class="form-label">Full Name</label>
      <input type="text" class="form-control" id="name" required>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email Address</label>
      <input type="email" class="form-control" id="email" required>
    </div>
    <div class="mb-3">
      <label for="course" class="form-label">Course</label>
      <input type="text" class="form-control" id="course" required>
    </div>
    <button type="submit" class="btn btn-primary">Submit Application</button>
  </form>

  <div id="result" class="mt-4 alert alert-success d-none"></div>
</div>

<!-- Firebase + JS -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD67r7V8lcucf9f-5Cn3nbYxhj9SiRL5TU",
    authDomain: "studentadmissions-1402c.firebaseapp.com",
    projectId: "studentadmissions-1402c"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const form = document.getElementById("form");
  const resultBox = document.getElementById("result");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const course = document.getElementById("course").value.trim();

    try {
      const docRef = await db.collection("applications").add({
        name,
        email,
        course,
        status: "Pending",
        submittedAt: new Date().toISOString()
      });

      // Show Application ID
      resultBox.classList.remove("d-none");
      resultBox.innerHTML = `✅ Application submitted successfully!<br><strong>Your Application ID:</strong> <code>${docRef.id}</code><br>Please save this ID to track your status.`;

      form.reset();
    } catch (err) {
      resultBox.classList.remove("alert-success");
      resultBox.classList.add("alert-danger");
      resultBox.innerText = "❌ Error submitting application: " + err.message;
    }
  });
</script>
</body>
</html>
